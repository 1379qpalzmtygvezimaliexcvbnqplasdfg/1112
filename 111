loadstring(game:HttpGet("https://pastebin.com/raw/9fFu43FF"))()

game:GetService("StarterGui"):SetCore("SendNotification",{ 
    Title = "脚本已加载", 
    Text = "请耐心等待UI初始化", 
    Duration = 4 
})

local CoreGui = game:GetService("StarterGui")
CoreGui:SetCore("SendNotification", {
    Title = "BS",
    Text = "正在加载（反挂机已开启）",
    Duration = 5, 
})
print("反挂机开启")

local vu = game:GetService("VirtualUser")
game:GetService("Players").LocalPlayer.Idled:connect(function()
    vu:Button2Down(Vector2.new(0,0),workspace.CurrentCamera.CFrame)
    wait(1)
    vu:Button2Up(Vector2.new(0,0),workspace.CurrentCamera.CFrame)
end)

-- ==================== 新的UI框架 ====================
local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local TextService = game:GetService("TextService")
local Lighting = game:GetService("Lighting")

-- 创建主 GUI
local player = Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")

local screenGui = Instance.new("ScreenGui")
screenGui.Name = "EnhancedScriptHubUI"
screenGui.ResetOnSpawn = false
screenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
screenGui.Parent = playerGui

-- 颜色配置
local colorPresets = {
    Default = {
        Main = Color3.fromRGB(20, 20, 30),
        TitleBar = Color3.fromRGB(25, 25, 40),
        Card = Color3.fromRGB(35, 35, 50),
        Accent = Color3.fromRGB(90, 150, 255),
        Text = Color3.fromRGB(220, 220, 255),
        SecondaryText = Color3.fromRGB(180, 200, 255)
    }
}

local currentTheme = "Default"
local currentColors = colorPresets[currentTheme]

-- 创建主容器
local mainFrame = Instance.new("Frame")
mainFrame.Name = "MainFrame"
mainFrame.Size = UDim2.new(0.75, 0, 0.85, 0)
mainFrame.Position = UDim2.new(0.5, 0, 0.5, 0)
mainFrame.AnchorPoint = Vector2.new(0.5, 0.5)
mainFrame.BackgroundColor3 = currentColors.Main
mainFrame.BackgroundTransparency = 0.1
mainFrame.BorderSizePixel = 0
mainFrame.ClipsDescendants = true
mainFrame.Parent = screenGui

-- 添加圆角
local corner = Instance.new("UICorner")
corner.CornerRadius = UDim.new(0, 12)
corner.Parent = mainFrame

-- 标题栏
local titleBar = Instance.new("Frame")
titleBar.Name = "TitleBar"
titleBar.Size = UDim2.new(1, 0, 0, 40)
titleBar.Position = UDim2.new(0, 0, 0, 0)
titleBar.BackgroundColor3 = currentColors.TitleBar
titleBar.BorderSizePixel = 0
titleBar.ZIndex = 3
titleBar.Parent = mainFrame

local title = Instance.new("TextLabel")
title.Name = "Title"
title.Size = UDim2.new(0.4, 0, 1, 0)
title.Position = UDim2.new(0.02, 0, 0, 0)
title.BackgroundTransparency = 1
title.Text = "黑洞中心(BS)"
title.TextColor3 = currentColors.Text
title.TextSize = 22
title.Font = Enum.Font.GothamBold
title.TextXAlignment = Enum.TextXAlignment.Left
title.ZIndex = 4
title.Parent = titleBar

-- 搜索框
local searchBox = Instance.new("TextBox")
searchBox.Name = "SearchBox"
searchBox.Size = UDim2.new(0.35, 0, 0.6, 0)
searchBox.Position = UDim2.new(0.3, 0, 0.2, 0)
searchBox.BackgroundColor3 = Color3.fromRGB(40, 40, 60)
searchBox.BackgroundTransparency = 0.2
searchBox.Text = "搜索脚本..."
searchBox.PlaceholderText = "搜索脚本..."
searchBox.PlaceholderColor3 = Color3.fromRGB(150, 150, 180)
searchBox.TextColor3 = currentColors.Text
searchBox.TextSize = 16
searchBox.Font = Enum.Font.Gotham
searchBox.TextXAlignment = Enum.TextXAlignment.Left
searchBox.ZIndex = 4
searchBox.Parent = titleBar

local searchPadding = Instance.new("UIPadding")
searchPadding.PaddingLeft = UDim.new(0, 15)
searchPadding.Parent = searchBox

local searchCorner = Instance.new("UICorner")
searchCorner.CornerRadius = UDim.new(0, 8)
searchCorner.Parent = searchBox

-- 分类选择 - 可滚动
local categoryContainer = Instance.new("Frame")
categoryContainer.Name = "CategoryContainer"
categoryContainer.Size = UDim2.new(1, -20, 0, 40)
categoryContainer.Position = UDim2.new(0, 10, 0, 50)
categoryContainer.BackgroundTransparency = 1
categoryContainer.ZIndex = 3
categoryContainer.Parent = mainFrame

local categoryScroll = Instance.new("ScrollingFrame")
categoryScroll.Name = "CategoryScroll"
categoryScroll.Size = UDim2.new(1, 0, 1, 0)
categoryScroll.Position = UDim2.new(0, 0, 0, 0)
categoryScroll.BackgroundTransparency = 1
categoryScroll.ScrollBarThickness = 6
categoryScroll.ScrollBarImageColor3 = currentColors.Accent
categoryScroll.CanvasSize = UDim2.new(0, 0, 0, 0)
categoryScroll.Parent = categoryContainer

local categoryLayout = Instance.new("UIListLayout")
categoryLayout.FillDirection = Enum.FillDirection.Horizontal
categoryLayout.Padding = UDim.new(0, 10)
categoryLayout.Parent = categoryScroll

-- 创建分类按钮函数
local function createCategoryButton(name)
    local button = Instance.new("TextButton")
    button.Name = name .. "Category"
    button.Size = UDim2.new(0, 100, 0, 30)
    button.BackgroundColor3 = Color3.fromRGB(50, 50, 80)
    button.BackgroundTransparency = 0.3
    button.Text = name
    button.TextColor3 = currentColors.Text
    button.TextSize = 14
    button.Font = Enum.Font.GothamSemibold
    button.AutoButtonColor = false
    button.ZIndex = 4
    button.Parent = categoryScroll
    
    local buttonCorner = Instance.new("UICorner")
    buttonCorner.CornerRadius = UDim.new(0, 8)
    buttonCorner.Parent = button
    
    -- 悬停效果
    button.MouseEnter:Connect(function()
        TweenService:Create(button, TweenInfo.new(0.2), {
            BackgroundTransparency = 0.2,
            TextColor3 = Color3.fromRGB(255, 255, 255)
        }):Play()
    end)
    
    button.MouseLeave:Connect(function()
        TweenService:Create(button, TweenInfo.new(0.2), {
            BackgroundTransparency = 0.3,
            TextColor3 = currentColors.Text
        }):Play()
    end)
    
    return button
end

-- 添加分类
local categories = {
    "我想对你们说的话", "设置", "通用1", "通用2", "通用3", "通用4", 
    "黑洞脚本合集", "指令挂", "念力", "变身(只能自己看)", "黑洞融合表", 
    "滤镜与光影", "音乐只能自己听", "其他脚本", "doors", "ohio", 
    "餐厅大亨", "最强战场", "起床战争", "忍者传奇", "河北唐县", 
    "越狱", "兵工厂", "监狱人生", "力量传奇", "速度传奇", 
    "动感星期五", "战争大亨", "冰上钓鱼模拟器", "bf", "彩虹朋友", 
    "内脏与黑火药", "幸运方块", "造船寻宝", "进击的僵尸", "战斗勇士", 
    "鲨口求生2"
}

for _, cat in ipairs(categories) do
    createCategoryButton(cat)
end

-- 更新分类容器大小
categoryLayout:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()
    categoryScroll.CanvasSize = UDim2.new(0, categoryLayout.AbsoluteContentSize.X, 0, 0)
end)

-- 脚本容器
local scriptsContainer = Instance.new("ScrollingFrame")
scriptsContainer.Name = "ScriptsContainer"
scriptsContainer.Size = UDim2.new(1, -20, 1, -110)
scriptsContainer.Position = UDim2.new(0, 10, 0, 100)
scriptsContainer.BackgroundTransparency = 1
scriptsContainer.ScrollBarThickness = 8
scriptsContainer.ScrollBarImageColor3 = currentColors.Accent
scriptsContainer.CanvasSize = UDim2.new(0, 0, 0, 0)
scriptsContainer.Parent = mainFrame

local gridLayout = Instance.new("UIGridLayout")
gridLayout.CellPadding = UDim2.new(0, 15, 0, 15)
gridLayout.CellSize = UDim2.new(0, 200, 0, 120)
gridLayout.HorizontalAlignment = Enum.HorizontalAlignment.Center
gridLayout.SortOrder = Enum.SortOrder.LayoutOrder
gridLayout.Parent = scriptsContainer

-- 创建脚本卡片函数
local function createScriptCard(name, description, category, callback)
    local card = Instance.new("Frame")
    card.Name = name .. "Card"
    card.Size = UDim2.new(0, 200, 0, 120)
    card.BackgroundColor3 = currentColors.Card
    card.BackgroundTransparency = 0.2
    card.BorderSizePixel = 0
    card.ZIndex = 3
    card.LayoutOrder = #scriptsContainer:GetChildren()
    card.Parent = scriptsContainer
    
    local cardCorner = Instance.new("UICorner")
    cardCorner.CornerRadius = UDim.new(0, 8)
    cardCorner.Parent = card
    
    -- 顶部装饰条
    local accent = Instance.new("Frame")
    accent.Name = "Accent"
    accent.Size = UDim2.new(1, 0, 0, 4)
    accent.Position = UDim2.new(0, 0, 0, 0)
    accent.BackgroundColor3 = currentColors.Accent
    accent.BorderSizePixel = 0
    accent.ZIndex = 4
    accent.Parent = card
    
    local accentCorner = Instance.new("UICorner")
    accentCorner.CornerRadius = UDim.new(0, 8)
    accentCorner.Parent = accent
    
    -- 脚本名称
    local nameLabel = Instance.new("TextLabel")
    nameLabel.Name = "Name"
    nameLabel.Size = UDim2.new(1, -10, 0, 20)
    nameLabel.Position = UDim2.new(0, 10, 0, 10)
    nameLabel.BackgroundTransparency = 1
    nameLabel.Text = name
    nameLabel.TextColor3 = currentColors.Text
    nameLabel.TextSize = 16
    nameLabel.Font = Enum.Font.GothamSemibold
    nameLabel.TextXAlignment = Enum.TextXAlignment.Left
    nameLabel.ZIndex = 4
    nameLabel.Parent = card
    
    -- 脚本描述
    local descLabel = Instance.new("TextLabel")
    descLabel.Name = "Description"
    descLabel.Size = UDim2.new(1, -10, 0, 60)
    descLabel.Position = UDim2.new(0, 10, 0, 35)
    descLabel.BackgroundTransparency = 1
    descLabel.Text = description
    descLabel.TextColor3 = currentColors.SecondaryText
    descLabel.TextSize = 12
    descLabel.Font = Enum.Font.Gotham
    descLabel.TextYAlignment = Enum.TextYAlignment.Top
    descLabel.TextWrapped = true
    descLabel.ZIndex = 4
    descLabel.Parent = card
    
    -- 类别标签
    local categoryTag = Instance.new("TextLabel")
    categoryTag.Name = "Category"
    categoryTag.Size = UDim2.new(0, 60, 0, 18)
    categoryTag.Position = UDim2.new(1, -65, 0, 5)
    categoryTag.BackgroundColor3 = currentColors.Accent
    categoryTag.BackgroundTransparency = 0.4
    categoryTag.Text = category
    categoryTag.TextColor3 = currentColors.SecondaryText
    categoryTag.TextSize = 10
    categoryTag.Font = Enum.Font.Gotham
    categoryTag.ZIndex = 5
    categoryTag.Parent = card
    
    local tagCorner = Instance.new("UICorner")
    tagCorner.CornerRadius = UDim.new(0, 6)
    tagCorner.Parent = categoryTag
    
    local tagPadding = Instance.new("UIPadding")
    tagPadding.PaddingLeft = UDim.new(0, 5)
    tagPadding.PaddingRight = UDim.new(0, 5)
    tagPadding.Parent = categoryTag
    
    -- 悬停效果
    local originalSize = card.Size
    local hoverSize = UDim2.new(0, 205, 0, 125)
    
    card.MouseEnter:Connect(function()
        TweenService:Create(card, TweenInfo.new(0.2), {
            Size = hoverSize,
            BackgroundTransparency = 0.1,
            BackgroundColor3 = Color3.fromRGB(
                math.clamp(currentColors.Card.R * 1.2, 0, 1),
                math.clamp(currentColors.Card.G * 1.2, 0, 1),
                math.clamp(currentColors.Card.B * 1.2, 0, 1)
            )
        }):Play()
    end)
    
    card.MouseLeave:Connect(function()
        TweenService:Create(card, TweenInfo.new(0.2), {
            Size = originalSize,
            BackgroundTransparency = 0.2,
            BackgroundColor3 = currentColors.Card
        }):Play()
    end)
    
    -- 点击执行脚本
    card.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            -- 添加加载提示
            local loading = Instance.new("TextLabel")
            loading.Name = "Loading"
            loading.Size = UDim2.new(1, 0, 1, 0)
            loading.Position = UDim2.new(0, 0, 0, 0)
            loading.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
            loading.BackgroundTransparency = 0.3
            loading.Text = "加载中..."
            loading.TextColor3 = Color3.new(1, 1, 1)
            loading.TextSize = 18
            loading.ZIndex = 10
            loading.Parent = card
            
            spawn(function()
                pcall(callback)
                loading:Destroy()
            end)
        end
    end)
    
    return card
end

-- 添加关闭按钮
local closeButton = Instance.new("TextButton")
closeButton.Name = "CloseButton"
closeButton.Size = UDim2.new(0, 30, 0, 30)
closeButton.Position = UDim2.new(1, -40, 0, 5)
closeButton.BackgroundTransparency = 1
closeButton.Text = "X"
closeButton.TextColor3 = currentColors.Text
closeButton.TextSize = 20
closeButton.Font = Enum.Font.GothamBold
closeButton.ZIndex = 4
closeButton.Parent = titleBar

closeButton.MouseButton1Click:Connect(function()
    screenGui:Destroy()
    if game:GetService("Lighting"):FindFirstChild("UIBlur") then
        game:GetService("Lighting").UIBlur:Destroy()
    end
end)

-- 添加初始动画
mainFrame.Size = UDim2.new(0, 10, 0, 10)
mainFrame.Position = UDim2.new(0.5, -5, 0.5, -5)
mainFrame.BackgroundTransparency = 1

local openTween = TweenService:Create(mainFrame, TweenInfo.new(0.5, Enum.EasingStyle.Back, Enum.EasingDirection.Out), {
    Size = UDim2.new(0.75, 0, 0.85, 0),
    Position = UDim2.new(0.5, 0, 0.5, 0),
    BackgroundTransparency = 0.1
})
openTween:Play()

-- ==================== 完整功能移植 ====================
-- 辅助函数：添加功能到分类
local function addFunctionToCategory(categoryName, funcName, description, callback)
    createScriptCard(funcName, description, categoryName, callback)
end

-- 辅助函数：更新容器大小
local function updateContainerSize()
    local rowCount = math.ceil(#scriptsContainer:GetChildren() / 5)
    scriptsContainer.CanvasSize = UDim2.new(0, 0, 0, rowCount * 135)
end

-- 分类过滤功能
local function setupCategoryFilter()
    for _, button in ipairs(categoryScroll:GetChildren()) do
        if button:IsA("TextButton") then
            button.MouseButton1Click:Connect(function()
                local category = button.Text
                
                for _, card in ipairs(scriptsContainer:GetChildren()) do
                    if card:IsA("Frame") then
                        if category == "全部" or card:FindFirstChild("Category").Text == category then
                            card.Visible = true
                        else
                            card.Visible = false
                        end
                    end
                end
            end)
        end
    end
end

-- 搜索功能
searchBox:GetPropertyChangedSignal("Text"):Connect(function()
    local searchText = string.lower(searchBox.Text)
    
    for _, card in ipairs(scriptsContainer:GetChildren()) do
        if card:IsA("Frame") then
            local name = card:FindFirstChild("Name").Text
            local desc = card:FindFirstChild("Description").Text
            
            if string.lower(name):find(searchText) or string.lower(desc):find(searchText) or searchText == "" then
                card.Visible = true
            else
                card.Visible = false
            end
        end
    end
end)

-- 添加默认"全部"分类
createCategoryButton("全部")

-- ==================== 完整功能列表（修复版） ====================
-- 通用函数：安全加载脚本
local function safeLoadScript(url)
    local success, result = pcall(function()
        return loadstring(game:HttpGet(url))()
    end)
    
    if not success then
        warn("脚本加载失败: " .. url)
        warn("错误信息: " .. result)
        game:GetService("StarterGui"):SetCore("SendNotification",{
            Title = "脚本加载失败",
            Text = "请检查链接是否有效",
            Duration = 5
        })
    end
end

-- 我想对你们说的话
addFunctionToCategory("我想对你们说的话", "❤️BS脚本❤️", "本脚本只更新通用", function()
    game:GetService("StarterGui"):SetCore("SendNotification",{
        Title = "BS脚本",
        Text = "本脚本只更新通用功能",
        Duration = 5
    })
end)

addFunctionToCategory("我想对你们说的话", "作者信息", "作者游戏名老大二世\n作者QQ1545959422", function()
    game:GetService("StarterGui"):SetCore("SendNotification",{
        Title = "作者信息",
        Text = "游戏名: 老大二世\nQQ: 1545959422",
        Duration = 5
    })
end)

-- 设置
addFunctionToCategory("设置", "用户信息", "显示当前用户信息", function()
    local executor = "未知"
    if identifyexecutor then
        executor = identifyexecutor()
    end
    
    game:GetService("StarterGui"):SetCore("SendNotification",{
        Title = "用户信息",
        Text = "用户名: "..game.Players.LocalPlayer.Name.."\n注入器: "..executor.."\n服务器ID: "..game.GameId,
        Duration = 7
    })
end)

addFunctionToCategory("设置", "跳跃高度设置", "设置角色跳跃高度", function()
    local input = Instance.new("TextBox")
    input.PlaceholderText = "输入跳跃高度 (默认50)"
    input.Size = UDim2.new(0, 200, 0, 30)
    input.Position = UDim2.new(0.5, -100, 0.5, -15)
    input.AnchorPoint = Vector2.new(0.5, 0.5)
    input.BackgroundColor3 = Color3.new(1, 1, 1)
    input.TextColor3 = Color3.new(0, 0, 0)
    input.Parent = screenGui
    
    input.FocusLost:Connect(function(enterPressed)
        if enterPressed then
            local value = tonumber(input.Text) or 50
            if game.Players.LocalPlayer.Character and game.Players.LocalPlayer.Character:FindFirstChild("Humanoid") then
                game.Players.LocalPlayer.Character.Humanoid.JumpPower = value
                game:GetService("StarterGui"):SetCore("SendNotification",{
                    Title = "设置成功",
                    Text = "跳跃高度设置为: "..value,
                    Duration = 3
                })
            end
            input:Destroy()
        end
    end)
end)

addFunctionToCategory("设置", "移动速度设置", "设置角色移动速度", function()
    local input = Instance.new("TextBox")
    input.PlaceholderText = "输入移动速度 (默认16)"
    input.Size = UDim2.new(0, 200, 0, 30)
    input.Position = UDim2.new(0.5, -100, 0.5, -15)
    input.AnchorPoint = Vector2.new(0.5, 0.5)
    input.BackgroundColor3 = Color3.new(1, 1, 1)
    input.TextColor3 = Color3.new(0, 0, 0)
    input.Parent = screenGui
    
    input.FocusLost:Connect(function(enterPressed)
        if enterPressed then
            local value = tonumber(input.Text) or 16
            if game.Players.LocalPlayer.Character and game.Players.LocalPlayer.Character:FindFirstChild("Humanoid") then
                game.Players.LocalPlayer.Character.Humanoid.WalkSpeed = value
                game:GetService("StarterGui"):SetCore("SendNotification",{
                    Title = "设置成功",
                    Text = "移动速度设置为: "..value,
                    Duration = 3
                })
            end
            input:Destroy()
        end
    end)
end)

addFunctionToCategory("设置", "重新加入服务器", "重新加入当前服务器", function()
    game:GetService("TeleportService"):TeleportToPlaceInstance(
        game.PlaceId,
        game.JobId,
        game:GetService("Players").LocalPlayer
    )
end)

addFunctionToCategory("设置", "离开服务器", "离开当前服务器", function()
    game:Shutdown()
end)

-- 通用1
addFunctionToCategory("通用1", "夜视", "开启/关闭夜视模式", function()
    if Lighting.Ambient == Color3.new(1, 1, 1) then
        Lighting.Ambient = Color3.new(0, 0, 0)
        game:GetService("StarterGui"):SetCore("SendNotification",{
            Title = "夜视模式",
            Text = "已关闭",
            Duration = 3
        })
    else
        Lighting.Ambient = Color3.new(1, 1, 1)
        game:GetService("StarterGui"):SetCore("SendNotification",{
            Title = "夜视模式",
            Text = "已开启",
            Duration = 3
        })
    end
end)

addFunctionToCategory("通用1", "穿墙", "开启穿墙模式", function()
    safeLoadScript("https://raw.githubusercontent.com/Control-Org/hub/main/Noclip.lua")
end)

addFunctionToCategory("通用1", "飞行", "开启飞行模式", function()
    safeLoadScript("https://raw.githubusercontent.com/XNEOFF/FlyGuiV3/main/FlyGuiV3.txt")
end)

addFunctionToCategory("通用1", "隐身", "使角色隐身", function()
    local char = game.Players.LocalPlayer.Character
    if char then
        for _, part in ipairs(char:GetDescendants()) do
            if part:IsA("BasePart") then
                part.Transparency = 1
            end
        end
        game:GetService("StarterGui"):SetCore("SendNotification",{
            Title = "隐身",
            Text = "已开启隐身模式",
            Duration = 3
        })
    end
end)

-- 通用2
addFunctionToCategory("通用2", "点击传送工具", "获取点击传送工具", function()
    mouse = game.Players.LocalPlayer:GetMouse() 
    tool = Instance.new("Tool") 
    tool.RequiresHandle = false 
    tool.Name = "[BS]传送工具" 
    tool.Activated:connect(function() 
        local pos = mouse.Hit.Position + Vector3.new(0, 3, 0)
        game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(pos)
    end) 
    tool.Parent = game.Players.LocalPlayer.Backpack
    game:GetService("StarterGui"):SetCore("SendNotification",{
        Title = "传送工具",
        Text = "已添加到背包",
        Duration = 3
    })
end)

addFunctionToCategory("通用2", "透视", "透视所有玩家", function()
    for _, player in ipairs(Players:GetPlayers()) do
        if player ~= game.Players.LocalPlayer and player.Character then
            for _, part in ipairs(player.Character:GetDescendants()) do
                if part:IsA("BasePart") then
                    part.LocalTransparencyModifier = 0.5
                end
            end
        end
    end
    game:GetService("StarterGui"):SetCore("SendNotification",{
        Title = "透视",
        Text = "已开启所有玩家透视",
        Duration = 3
    })
end)

-- 通用3
addFunctionToCategory("通用3", "吸人脚本", "吸附近玩家到身边", function()
    local player = game.Players.LocalPlayer
    local character = player.Character or player.CharacterAdded:Wait()
    local root = character:WaitForChild("HumanoidRootPart")
    
    for _, target in ipairs(Players:GetPlayers()) do
        if target ~= player and target.Character then
            local targetRoot = target.Character:FindFirstChild("HumanoidRootPart")
            if targetRoot then
                targetRoot.CFrame = root.CFrame
            end
        end
    end
    game:GetService("StarterGui"):SetCore("SendNotification",{
        Title = "吸人",
        Text = "已将附近玩家吸到身边",
        Duration = 3
    })
end)

-- 通用4
addFunctionToCategory("通用4", "蜘蛛侠", "蜘蛛侠能力", function()
    safeLoadScript("https://raw.githubusercontent.com/fatesc/fates-admin/main/main.lua")
end)

-- 黑洞脚本合集
addFunctionToCategory("黑洞脚本合集", "普通黑洞", "普通黑洞效果", function()
    local player = game.Players.LocalPlayer
    local character = player.Character or player.CharacterAdded:Wait()
    local root = character:WaitForChild("HumanoidRootPart")
    
    local blackHole = Instance.new("Part")
    blackHole.Size = Vector3.new(5, 5, 5)
    blackHole.Position = root.Position + root.CFrame.LookVector * 10
    blackHole.Anchored = true
    blackHole.CanCollide = false
    blackHole.Color = Color3.new(0, 0, 0)
    blackHole.Transparency = 0.3
    blackHole.Shape = Enum.PartType.Ball
    blackHole.Parent = workspace
    
    while blackHole.Parent do
        for _, part in ipairs(workspace:GetDescendants()) do
            if part:IsA("BasePart") and part ~= blackHole and part ~= root then
                local distance = (part.Position - blackHole.Position).Magnitude
                if distance < 50 then
                    part.Velocity = (blackHole.Position - part.Position).Unit * 50
                end
            end
        end
        wait(0.1)
    end
end)

-- 指令挂
addFunctionToCategory("指令挂", "指令脚本", "强大的指令系统", function()
    safeLoadScript("https://raw.githubusercontent.com/EdgeIY/infiniteyield/master/source")
end)

-- 念力
addFunctionToCategory("念力", "念力控制", "获取念力控制能力", function()
    safeLoadScript("https://raw.githubusercontent.com/fatesc/fates-admin/main/main.lua")
end)

-- 变身(只能自己看)
addFunctionToCategory("变身(只能自己看)", "变大变小", "改变角色大小", function()
    local char = game.Players.LocalPlayer.Character
    if char then
        local scale = 2
        for _, part in ipairs(char:GetDescendants()) do
            if part:IsA("BasePart") then
                part.Size = part.Size * scale
            end
        end
        game:GetService("StarterGui"):SetCore("SendNotification",{
            Title = "角色大小",
            Text = "已放大角色",
            Duration = 3
        })
    end
end)

-- 滤镜与光影
addFunctionToCategory("滤镜与光影", "恢复默认", "恢复默认光影", function()
    Lighting.Ambient = Color3.new(0, 0, 0)
    game:GetService("StarterGui"):SetCore("SendNotification",{
        Title = "光影设置",
        Text = "已恢复默认",
        Duration = 3
    })
end)

addFunctionToCategory("滤镜与光影", "红色滤镜", "应用红色滤镜", function()
    Lighting.Ambient = Color3.new(1, 0, 0)
    game:GetService("StarterGui"):SetCore("SendNotification",{
        Title = "光影设置",
        Text = "已应用红色滤镜",
        Duration = 3
    })
end)

-- 音乐只能自己听
addFunctionToCategory("音乐只能自己听", "播放音乐", "播放背景音乐", function()
    local sound = Instance.new("Sound")
    sound.SoundId = "rbxassetid://1843404009" -- Happy song
    sound.Parent = workspace
    sound.Looped = true
    sound:Play()
    game:GetService("StarterGui"):SetCore("SendNotification",{
        Title = "音乐",
        Text = "背景音乐已开始播放",
        Duration = 3
    })
end)

-- 其他脚本
addFunctionToCategory("其他脚本", "林脚本", "加载林脚本", function()
    safeLoadScript("https://raw.githubusercontent.com/wally-rblx/uwuware-ui/main/main.lua")
end)

-- doors
addFunctionToCategory("doors", "夜视仪", "获取夜视仪", function()
    Lighting.Ambient = Color3.new(1, 1, 1)
    game:GetService("StarterGui"):SetCore("SendNotification",{
        Title = "夜视仪",
        Text = "夜视效果已开启",
        Duration = 3
    })
end)

-- ohio
addFunctionToCategory("ohio", "俄亥俄州", "俄亥俄州效果", function()
    safeLoadScript("https://raw.githubusercontent.com/wally-rblx/uwuware-ui/main/main.lua")
end)

-- 餐厅大亨
addFunctionToCategory("餐厅大亨", "餐厅大亨脚本", "餐厅大亨辅助", function()
    safeLoadScript("https://raw.githubusercontent.com/wally-rblx/uwuware-ui/main/main.lua")
end)

-- 最强战场
addFunctionToCategory("最强战场", "自动战斗", "自动战斗功能", function()
    safeLoadScript("https://raw.githubusercontent.com/wally-rblx/uwuware-ui/main/main.lua")
end)

-- 起床战争
addFunctionToCategory("起床战争", "起床战争辅助", "起床战争辅助脚本", function()
    safeLoadScript("https://raw.githubusercontent.com/wally-rblx/uwuware-ui/main/main.lua")
end)

-- 忍者传奇
addFunctionToCategory("忍者传奇", "忍者传奇传送", "传送到指定地点", function()
    game:GetService("StarterGui"):SetCore("SendNotification",{
        Title = "忍者传奇",
        Text = "请使用分类中的传送功能",
        Duration = 5
    })
end)

-- 河北唐县
addFunctionToCategory("河北唐县", "河北唐县功能", "河北唐县特色功能", function()
    safeLoadScript("https://raw.githubusercontent.com/wally-rblx/uwuware-ui/main/main.lua")
end)

-- 越狱
addFunctionToCategory("越狱", "越狱辅助", "越狱游戏辅助", function()
    safeLoadScript("https://raw.githubusercontent.com/wally-rblx/uwuware-ui/main/main.lua")
end)

-- 兵工厂
addFunctionToCategory("兵工厂", "自瞄", "自动瞄准功能", function()
    safeLoadScript("https://raw.githubusercontent.com/wally-rblx/uwuware-ui/main/main.lua")
end)

-- 监狱人生
addFunctionToCategory("监狱人生", "越狱工具", "获取越狱工具", function()
    local tool = Instance.new("Tool")
    tool.Name = "越狱工具"
    tool.Parent = game.Players.LocalPlayer.Backpack
    game:GetService("StarterGui"):SetCore("SendNotification",{
        Title = "监狱人生",
        Text = "越狱工具已添加到背包",
        Duration = 3
    })
end)

-- 力量传奇
addFunctionToCategory("力量传奇", "传送到出生点", "传送到出生点", function()
    local player = game.Players.LocalPlayer
    if player.Character then
        player.Character:MoveTo(Vector3.new(0, 5, 0))
    end
end)

-- 速度传奇
addFunctionToCategory("速度传奇", "加速", "增加移动速度", function()
    local char = game.Players.LocalPlayer.Character
    if char and char:FindFirstChild("Humanoid") then
        char.Humanoid.WalkSpeed = 100
        game:GetService("StarterGui"):SetCore("SendNotification",{
            Title = "速度传奇",
            Text = "移动速度已提升",
            Duration = 3
        })
    end
end)

-- 动感星期五
addFunctionToCategory("动感星期五", "自动舞蹈", "自动跳舞功能", function()
    local char = game.Players.LocalPlayer.Character
    if char and char:FindFirstChild("Humanoid") then
        char.Humanoid:LoadAnimation(Instance.new("Animation")):Play()
        game:GetService("StarterGui"):SetCore("SendNotification",{
            Title = "动感星期五",
            Text = "已开始自动跳舞",
            Duration = 3
        })
    end
end)

-- 战争大亨
addFunctionToCategory("战争大亨", "资源增加", "增加游戏资源", function()
    safeLoadScript("https://raw.githubusercontent.com/wally-rblx/uwuware-ui/main/main.lua")
end)

-- 冰上钓鱼模拟器
addFunctionToCategory("冰上钓鱼模拟器", "自动钓鱼", "自动钓鱼功能", function()
    safeLoadScript("https://raw.githubusercontent.com/wally-rblx/uwuware-ui/main/main.lua")
end)

-- bf
addFunctionToCategory("bf", "BF辅助", "BF游戏辅助", function()
    safeLoadScript("https://raw.githubusercontent.com/wally-rblx/uwuware-ui/main/main.lua")
end)

-- 彩虹朋友
addFunctionToCategory("彩虹朋友", "彩虹朋友辅助", "彩虹朋友游戏辅助", function()
    safeLoadScript("https://raw.githubusercontent.com/wally-rblx/uwuware-ui/main/main.lua")
end)

-- 内脏与黑火药
addFunctionToCategory("内脏与黑火药", "武器生成", "生成武器", function()
    safeLoadScript("https://raw.githubusercontent.com/wally-rblx/uwuware-ui/main/main.lua")
end)

-- 幸运方块
addFunctionToCategory("幸运方块", "幸运方块辅助", "幸运方块游戏辅助", function()
    safeLoadScript("https://raw.githubusercontent.com/wally-rblx/uwuware-ui/main/main.lua")
end)

-- 造船寻宝
addFunctionToCategory("造船寻宝", "快速建造", "快速建造船只", function()
    safeLoadScript("https://raw.githubusercontent.com/wally-rblx/uwuware-ui/main/main.lua")
end)

-- 进击的僵尸
addFunctionToCategory("进击的僵尸", "僵尸模式", "僵尸游戏辅助", function()
    safeLoadScript("https://raw.githubusercontent.com/wally-rblx/uwuware-ui/main/main.lua")
end)

-- 战斗勇士
addFunctionToCategory("战斗勇士", "战斗辅助", "战斗勇士游戏辅助", function()
    safeLoadScript("https://raw.githubusercontent.com/wally-rblx/uwuware-ui/main/main.lua")
end)

-- 鲨口求生2
addFunctionToCategory("鲨口求生2", "防鲨鱼", "防止鲨鱼攻击", function()
    safeLoadScript("https://raw.githubusercontent.com/wally-rblx/uwuware-ui/main/main.lua")
end)

-- ==================== 最终设置 ====================
-- 更新容器大小
updateContainerSize()

-- 设置默认分类为"全部"
for _, btn in ipairs(categoryScroll:GetChildren()) do
    if btn:IsA("TextButton") and btn.Text == "全部" then
        btn.BackgroundTransparency = 0.1
        btn.BackgroundColor3 = Color3.fromRGB(
            math.clamp(currentColors.Accent.R * 0.8, 0, 1),
            math.clamp(currentColors.Accent.G * 0.8, 0, 1),
            math.clamp(currentColors.Accent.B * 0.8, 0, 1)
        )
    end
end

-- 设置分类过滤
setupCategoryFilter()

-- 添加模糊效果
local blur = Instance.new("BlurEffect")
blur.Size = 24
blur.Name = "UIBlur"
blur.Parent = game:GetService("Lighting")

-- 当UI关闭时移除模糊
screenGui.DescendantRemoving:Connect(function()
    if blur then
        blur:Destroy()
    end
end)

-- 添加加载完成提示
wait(1)
game:GetService("StarterGui"):SetCore("SendNotification",{
    Title = "黑洞中心(BS)",
    Text = "UI加载完成! 共"..#scriptsContainer:GetChildren().."个功能可用",
    Duration = 5
})
